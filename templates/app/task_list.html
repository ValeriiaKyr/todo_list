{% extends "base.html" %}

{% block content %}
  <h1>
    TODO list
    <a href="{% url "app:todo-create" %}" class="btn btn-primary link-to-page">
      Add task
    </a>
  </h1>
  
  {% if task_list %}
    <ul style="list-style-type: none; padding-left: 0;">
      {% for task in task_list %}
        <li>
         {% if task.done %}
          <a href="{% url "app:todo-complete" pk=task.id %}" class="btn btn-secondary link-to-page">
            Undo
          </a>
        {% else %}
          <a href="{% url "app:todo-complete" pk=task.id %}" class="btn btn-success link-to-page">
            Complete
          </a>
        {% endif %}
          <b>{{ task.description }}
          {% if task.done %}
            <span style="color: limegreen; margin-left: 5px;">Done</span>
          {% else %}
            <span style="color: red; margin-left: 5px;">Not done</span>
          {% endif %}
          </b>
          
          <p style="margin: 20px 0;">
            Created: {{ task.created_at }} 
          {% if task.deadline %}
              <span style="color: brown; margin-left: 7px;">Deadline: {{ task.deadline }}</span>
          {% endif %}
            <br>
            Tags: 
            {% for tag in task.tags.all %}
              {{ tag.name }}
            {% endfor %} 
          <a href="{% url "app:todo-update" pk=task.id %}">
            Update
          </a>
          <a href="{% url "app:todo-delete" pk=task.id %}">
            Delete
          </a>
          </p>
        </li>
        <hr>
      {% endfor %}
    
    </ul>
  {% else %}
    <p>There are no task</p>
  {% endif %}
{% endblock %}
